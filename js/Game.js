!function(){function i(i){game.run()}window.Game=Class.extend({init:function(e){var t=this;this.fps=e.fps||60,this.timer=null,this.frameUtil=new FrameUtil,this.canvas=document.getElementById(e.canvasID),this.canvas.width=document.body.clientWidth,this.canvas.height=document.body.clientHeight,this.ctx=this.canvas.getContext("2d"),this.images=null,this.sr=new StaticResoucesUtil,this.sr.loadPicture("./imagedata.json",function(e,s,a){if(t.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),t.ctx.fillText("正在加载图片"+e+"/"+s,10,60),e==s){t.images=a;t.images.gamebegin;console.log(t.images.gamebegin),t.ctx.drawImage(t.images.gamebegin,t.canvas.width/2-169,250,337,75),t.canvas.addEventListener("touchend",i),t.canvas.addEventListener("click",i)}})},run:function(){game.canvas.removeEventListener("touchend",i),game.canvas.removeEventListener("click",i);var e=this;this.timer=setInterval(function(){e.mainloop()},1e3/e.fps),this.fangzi=new Background({images:this.images.fangzi,width:300,height:256,speend:1,y:this.canvas.height-342}),this.shu=new Background({images:this.images.shu,width:300,height:216,speend:2,y:this.canvas.height-246}),this.dadi=new Background({images:this.images.dadi,width:48,height:48,speend:3,y:this.canvas.height-48}),this.bird=new Bird,this.pipeArray=[new Pipe],this.score=new scoreManage,this.gameove=!1},mainloop:function(){this.frameUtil.update(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.font="16px Consolas",this.fangzi.render(),this.fangzi.update(),this.shu.render(),this.shu.update(),this.dadi.render(),this.dadi.update(),this.gameove||this.frameUtil.currentFrame%110!=0||this.pipeArray.push(new Pipe);for(var i=0;i<this.pipeArray.length;i++)this.pipeArray[i].update(),this.pipeArray[i]&&this.pipeArray[i].render();this.score.render(),this.bird.render(),this.bird.update(),this.ctx.fillText("帧率/"+this.frameUtil.realFps,10,15),this.ctx.fillText("帧序号/"+this.frameUtil.currentFrame,10,35)},pause:function(){clearInterval(this.timer)},gameover:function(){this.fangzi.pause(),this.shu.pause(),this.bird.pause(),this.dadi.pause();for(var i=0;i<game.pipeArray.length;i++)this.pipeArray[i].pause(),this.gameove=!0;this.bird.die=!0}})}();